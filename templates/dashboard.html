{% extends "base.html" %}
{% block content %}
<style>
  .dashboard-container {
    max-width: 800px;
    margin: 0 auto;
  }
  .status-card {
    background: #f5f5f5;
    padding: 25px;
    border-radius: 8px;
    margin-bottom: 30px;
  }
  .status-card h3 {
    margin-top: 0;
    color: #1565C0;
  }
  .action-btn {
    display: inline-block;
    background: linear-gradient(90deg, #1565C0, #1E88E5);
    color: white;
    padding: 15px 30px;
    border-radius: 8px;
    font-size: 18px;
    font-weight: bold;
    text-decoration: none;
    margin: 10px;
    transition: transform 0.2s;
  }
  .action-btn:hover {
    transform: translateY(-3px);
  }
  .plan-details {
    margin-top: 20px;
  }
  .plan-details p {
    margin: 8px 0;
  }
</style>

<div class="container">
  <div class="dashboard-container">
    <h2>Welcome, {{ current_user.username }}!</h2>
    
    <div class="status-card">
      {% if active_sub %}
        <h3>Subscription Status</h3>
        <div class="plan-details">
          <p><strong>Plan:</strong> {{ sub_plan.name }}</p>
          <p><strong>Devices:</strong> {{ active_sub.devices }}</p>
          <p><strong>Expires:</strong> {{ active_sub.end_date.strftime('%d %b %Y') }}</p>
        </div>
      {% else %}
        <h3>Account Status</h3>
        <p>You're on the <strong>Free Plan</strong></p>
        <p>Tasks remaining this month: {{ tasks_remaining }}</p>
        <a href="{{ url_for('plans') }}" class="action-btn">Upgrade Now</a>
      {% endif %}
    </div>
    
    <div style="text-align: center;">
      <a href="{{ url_for('index') }}" class="action-btn">Process New Document</a>
    </div>
  </div>
</div>
{% endblock %}
